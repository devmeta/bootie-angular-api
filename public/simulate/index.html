
<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>Radarzone</title>
 <script src="jquery.min.js"></script>

</head>
<body>
	<h2>Simular actividad de vehículo</h2>
	<p>Ingrese el ID del vehículo y el intervalo entre peticiones (ms)</p>
	<input type="number" value="9" id="value">
	<input type="number" value="2000" id="interval">
	<button onclick="loop()">Simular</button>
	<button onclick="stop_loop()">Detener</button>
	<p><small>Respuesta del servidor:</small> <span id="result">Sin iniciar</span></p>
	<script>
        // connect to socket...
        if ("WebSocket" in window)
        {
           console.log("WebSocket is supported by your Browser!");
           
           // Let us open a web socket
           var ws = new WebSocket("ws://127.0.0.1:20000");
            
           ws.onopen = function()
           {
              	// Web Socket is connected, send data using send()
              	var room_id = $('#value').val();
                ws.send(JSON.stringify({
                    event: 'join',
                    rooms: room_id,
                    token: 'token'
                }));

                console.log("Room request sent...");
           };
            
           ws.onmessage = function (evt) 
           { 
                var data = JSON.parse(evt.data);

                console.log("Data: " + data);
           };
            
           ws.onclose = function()
           { 
              // websocket is closed.
              console.log("Connection is closed..."); 
           };
        }
        else
        {
           // The browser doesn't support WebSocket
           console.log("WebSocket NOT supported by your Browser!");
        }
	</script>
</body>
</html>